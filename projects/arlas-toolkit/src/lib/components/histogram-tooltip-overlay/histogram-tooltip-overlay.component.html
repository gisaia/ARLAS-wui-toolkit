<arlas-widget-tooltip [title]="tooltip.title">
  <ng-container xLabel>
    {{ tooltip.xLabel | translate }}
    <span class="axis-label">({{ 'x-axis' | translate }})</span>
  </ng-container>

  <ng-container xValue>
    <ng-container *ngTemplateOutlet="intervalTemplate; context: {value: interval.start}"></ng-container>
    <!-- keep this because we ll need this later -->
    <span class="interval-text" *ngIf="displayText">{{ 'to' | translate }}</span>
    <ng-container *ngTemplateOutlet="intervalTemplate; context: {value: interval.end}"></ng-container>
    <ng-container *ngTemplateOutlet="intervalTextTemplate;
      context: {
        unit: tooltip.xUnit,
        interval: tooltip.xRange.unit,
        intervalValue: tooltip.xRange.value,
        isTime: tooltip.dataType === 'time'
        }"></ng-container>
  </ng-container>

  <ng-container yLabel>
    {{ tooltip.yLabel | translate }}
    <span class="axis-label">({{ 'y-axis' | translate }})</span>
  </ng-container>

  <ng-container yValue>
    <table class="values">
      <tr *ngFor="let y of tooltip.y">
        <td>
          <div class="chip" [style.backgroundColor]="y.color"></div>
        </td>
        <td class="count">
          <div>{{ y.value }}</div>
        </td>
        <td *ngIf="tooltip?.dataType === 'time'">
          <div class="value-unit">
            {{ ((tooltip.yUnit && tooltip.yUnit.length > 0) ? tooltip.yUnit : y.chartId | getCollectionUnit) | translate }}
          </div>
        </td>
        <td *ngIf="tooltip?.dataType !== 'time' && tooltip.yUnit !== undefined && tooltip.yUnit !== ''">
          <div class="value-unit">{{ tooltip.yUnit | translate }}</div>
        </td>
      </tr>
    </table>
  </ng-container>
</arlas-widget-tooltip>

<!-- template for x and y values -->
<ng-template #intervalTemplate let-value="value" let-isTime="isTime">
  <ng-container *ngIf="value !== undefined && value !== null">
    <span class="interval-value">
      {{ value }}
    </span>
  </ng-container>
</ng-template>

<!-- display the text after the interval -->
<ng-template #intervalTextTemplate let-interval="interval" let-intervalValue="intervalValue"
             let-unit="unit" let-isTypeTime="isTime">
  <span class="interval-text" *ngIf="isTypeTime">{{ intervalValue }}</span>
  <span class="interval-text" *ngIf="!isTypeTime && unit">{{ unit | translate }}</span>
  <span class="interval-text" *ngIf="interval && isTypeTime">
    {{ interval | translate }}
  </span>
  <span class="interval-text" *ngIf="intervalValue && !isTypeTime">
    ({{ 'interval' | translate }} : {{ intervalValue }})
  </span>
</ng-template>
